# МАИ таблетки (авторизация)

Сервис для авторизации пациентов и мед-друзей, а также управления связями между ними.

## Содержание

- [API Документация](#api-документация)

## API Документация

Все эндпоинты, требующие аутентификации, используют HTTP Basic Authentication.

### Регистрация

#### `POST /auth/register`

**Описание:** Создает нового пациента и возвращает его уникальный идентификатор (`uuid`) и временный пароль.

**Параметры:** Нет.

**Возвращаемое значение:**

| Поле      | Тип    | Описание                             |
| :-------- | :----- | :----------------------------------- |
| `uuid`    | string | Уникальный идентификатор пациента.   |
| `password`| string | Пароль для аутентификации. |

---

### Управление связями с мед-друзьями

#### `POST /friends/add`

**Описание:** Добавляет мед-друга текущему пользователю (пациенту) по его `uuid`. Один пациент может иметь только одного мед-друга. Один мед-друг может обслуживать только одного пациента. Пользователь не может добавить себя как мед-друга.

**Параметры:**

| Поле | Тип    | Описание                           |
| :--- | :----- | :--------------------------------- |
| `uuid` | string | UUID мед-друга, которого нужно добавить. |

**Возвращаемое значение:**

| Поле      | Тип    | Описание                                     |
| :-------- | :----- | :------------------------------------------- |
| `success` | bool   | Успешность выполнения операции.              |
| `message` | string | Описание результата или ошибки.              |

**Возможные сообщения об ошибках:**

- `"Med friend with this UUID does not exist"`
- `"This med friend is already assigned to another patient. Remove that relationship first."`
- `"You cannot add yourself as a med friend"`
- `"Patient already has a med friend. Remove that relationship first."`

---

#### `DELETE /friends/remove`

**Описание:** Удаляет установленную связь с мед-другом для текущего пользователя (пациента). Если связь отсутствует, возвращает сообщение об этом.

**Параметры:** Нет.

**Возвращаемое значение:**

| Поле      | Тип    | Описание                                     |
| :-------- | :----- | :------------------------------------------- |
| `success` | bool   | Успешность выполнения операции.              |
| `message` | string | Описание результата.                         |

**Возможные сообщения:**

- `"Med friend removed successfully"`
- `"No med friend was assigned to remove"`

---

#### `GET /friends/get_med_friend`

**Описание:** Возвращает `uuid` мед-друга, установленного для текущего пользователя (пациента).

**Параметры:** Нет.

**Возвращаемое значение:**

| Поле      | Тип             | Описание                                     |
| :-------- | :-------------- | :------------------------------------------- |
| `uuid`    | string \| null  | UUID мед-друга или `null`, если не установлен. |
| `message` | string \| null  | Описание результата или `null`, если `uuid` есть. |

**Возможные сообщения:**

- `"No med friend assigned"`
- `null` (если `uuid` возвращается)

---

#### `GET /friends/get_patient/{friend_uuid}`

**Описание:** Возвращает `uuid` пациента, у которого установлен `friend_uuid` как мед-друг.

**Параметры:**

| Имя        | Тип    | Описание                           |
| :--------- | :----- | :--------------------------------- |
| `friend_uuid` | path | UUID мед-друга, для которого ищется пациент. |

**Возвращаемое значение:**

| Поле      | Тип             | Описание                                     |
| :-------- | :-------------- | :------------------------------------------- |
| `uuid`    | string \| null  | UUID пациента или `null`, если не найден.    |
| `message` | string \| null  | Описание результата или `null`, если `uuid` есть. |

**Возможные сообщения:**

- `"Med friend UUID not found"`
- `"No patient assigned to this med friend"`
- `null` (если `uuid` возвращается)
